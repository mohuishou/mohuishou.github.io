!function(e,t){var n=void 0!==e&&"IntersectionObserver"in e,r=Array.prototype.slice.call(t.querySelectorAll("img[srcset]"));if(r&&0!==r.length)if(n){var o=new IntersectionObserver(function(e){e.forEach(({target:e,isIntersecting:t})=>{t&&(e.setAttribute("srcset",e.src),e.onload=e.onerror=(()=>o.unobserve(e)))})},{threshold:[0],rootMargin:(e.innerHeight||t.documentElement.clientHeight)+"px"});r.map(e=>o.observe(e))}else{var i=new Debouncer(function(){for(var n=0;n<r.length;n++)o=r[n],void 0,void 0,void 0,c=o.getBoundingClientRect(),s=e.innerHeight||t.documentElement.clientHeight,((l=c.top)>=0&&l<=3*s||l<=0&&l<=-2*s-c.height)&&function(e){var t,n,o,i,c=r[e];t=c,n=function(){r=r.filter(function(e){return c!==e})},o=new Image,i=t.getAttribute("src"),o.onload=function(){t.srcset=i,n&&n()},o.srcset=i}(n);var o,c,s,l;0===r.length&&e.removeEventListener("scroll",i,!1)});e.addEventListener("scroll",i,!1),i.handleEvent()}}(window,document);